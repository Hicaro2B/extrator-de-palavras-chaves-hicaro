<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extrator de Palavras-Chave</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');

/* Paleta masculina moderna */
:root {
  --cor-primaria: #0D47A1;
  --cor-secundaria: #1E88E5;
  --cor-destaque: #64B5F6;
  --cor-card: rgba(30,30,50,0.85);
}

body {
  margin:0;
  padding:0;
  font-family:'Montserrat',sans-serif;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
  overflow:hidden;
  position:relative;
  background: url('https://images.unsplash.com/photo-1517511620798-cec17d428bc0?auto=format&fit=crop&w=1470&q=80') no-repeat center center/cover;
}

/* Canvas para partículas */
#particulas {
  position:absolute;
  top:0; left:0;
  width:100%;
  height:100%;
  z-index:0;
}

/* Container */
.container {
  position:relative;
  z-index:1;
  background: rgba(15,15,26,0.95);
  padding:2rem;
  border-radius:1rem;
  box-shadow:0 10px 25px rgba(0,0,0,0.7);
  width:100%;
  max-width:65rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:1.5rem;
}

#topo {
  width:100%;
  text-align:center;
  color: var(--cor-destaque);
  font-size:1.5rem;
  font-weight:600;
}

h1 {
  color: var(--cor-destaque);
  font-size:2.5rem;
  font-weight:700;
  text-align:center;
  text-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

textarea {
  width:100%;
  height:10rem;
  border-radius:0.75rem;
  padding:1rem 1.5rem;
  font-size:1.2rem;
  resize:none;
  border:none;
  outline:none;
  background: rgba(40,40,60,0.85);
  color:#fff;
  box-shadow: inset 0 2px 8px rgba(0,0,0,0.5);
  transition:0.3s;
}

textarea:focus {
  box-shadow: inset 0 2px 12px var(--cor-secundaria);
}

textarea::placeholder {
  color:#999;
}

button {
  padding:1rem 2.5rem;
  border-radius:0.6rem;
  border:none;
  background: var(--cor-secundaria);
  color:#fff;
  font-size:1.3rem;
  font-weight:600;
  cursor:pointer;
  transition: all 0.3s ease-in-out;
  box-shadow: 0 4px 10px rgba(30,136,229,0.4);
}

button:hover {
  background: var(--cor-primaria);
  transform: translateY(-2px);
  box-shadow:0 6px 15px rgba(30,136,229,0.6);
}

#resultado {
  width:100%;
  display:flex;
  flex-direction:column;
  gap:1rem;
}

#resumo,#palavras-chaves {
  background: var(--cor-card);
  padding:1rem 1.5rem;
  border-radius:0.75rem;
  box-shadow:0 4px 15px rgba(0,0,0,0.5);
}

#resumo h2,#palavras-chaves h2 {
  margin-bottom:0.5rem;
  color: var(--cor-destaque);
  font-size:1.3rem;
}

#resumo p,#palavras-chaves p {
  margin-bottom:0.4rem;
  font-weight:500;
  font-size:1.1rem;
  color:#fff;
  cursor:default;
  transition: transform 0.3s, box-shadow 0.3s;
}

#palavras-chaves p:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow:0 4px 12px rgba(30,136,229,0.7);
}

canvas {
  margin-top:1rem;
  width:100% !important;
  max-height:250px;
  border-radius:0.75rem;
  background: rgba(30,30,50,0.9);
}

footer {
  text-align:center;
  margin-top:1.5rem;
  color:#64B5F6;
  font-size:0.9rem;
}
</style>
</head>
<body>
<canvas id="particulas"></canvas>
<div class="container">
  <div id="topo">Hicaro - 2° Ano B</div>
  <h1>Extrator de Palavras-Chave</h1>
  <textarea id="entrada-de-texto" placeholder="Digite ou cole seu texto aqui..."></textarea>
  <button id="botao-palavrachave">Extrair</button>
  <div id="resultado"></div>
  <canvas id="grafico" height="200"></canvas>
  <footer>&copy; 2025 Hicaro Valdeir Fontes Munhoz. Todos os direitos reservados.</footer>
</div>

<script>
// Partículas animadas
const canvasP = document.getElementById('particulas');
const ctxP = canvasP.getContext('2d');
canvasP.width = window.innerWidth;
canvasP.height = window.innerHeight;
const particulas = [];
for(let i=0;i<120;i++){
  particulas.push({
    x:Math.random()*canvasP.width,
    y:Math.random()*canvasP.height,
    r:Math.random()*2+1,
    dx:(Math.random()-0.5)*0.5,
    dy:(Math.random()-0.5)*0.5
  });
}
function animar(){
  ctxP.clearRect(0,0,canvasP.width,canvasP.height);
  for(let p of particulas){
    ctxP.beginPath();
    ctxP.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctxP.fillStyle='rgba(100,181,246,0.7)';
    ctxP.fill();
    p.x+=p.dx;
    p.y+=p.dy;
    if(p.x>canvasP.width)p.x=0;
    if(p.x<0)p.x=canvasP.width;
    if(p.y>canvasP.height)p.y=0;
    if(p.y<0)p.y=canvasP.height;
  }
  requestAnimationFrame(animar);
}
animar();
window.addEventListener('resize',()=>{canvasP.width=window.innerWidth; canvasP.height=window.innerHeight;});

// Stopwords
const PALAVRAS_RUINS = new Set([
"que","para","com","não","uma","por","mais","dos","como","mas","foi","ele","das","tem","seu","sua","ser","quando","muito","está","também","pelo","pela","até","isso","ela","entre","era","depois","sem","mesmo","aos","ter","seus","quem","nas","esse","eles","estão","você","tinha","foram","essa","num","nem","suas","meu","minha","têm","numa","pelos","elas","havia","seja","qual","será","nós","tenho","lhe","deles","essas","esses","pelas","este","fosse","dele","vocês","vos","lhes","meus","minhas","teu","tua","teus","tuas","nosso","nossa","nossos","nossas","dela","delas","esta","estes","estas","aquele","aquela","aqueles","aquelas","isto","aquilo","estou","estamos","estive","esteve","estivemos","estiveram","estava","estávamos","estavam","e","ou","onde","embora","apesar","porque","enquanto","contudo","entretanto","portanto","além","antes","todavia","inclusive","diante","sobre","quanto","apenas","desde","uma vez","segundo","junto"
]);

const botao = document.querySelector('#botao-palavrachave');
const resultado = document.querySelector('#resultado');
const ctx = document.getElementById('grafico').getContext('2d');
let grafico;

botao.addEventListener('click',()=>{
  const texto = document.querySelector('#entrada-de-texto').value;
  const palavrasChave = processaTexto(texto);
  if(!palavrasChave.length){
    resultado.innerHTML="<p>Nenhuma palavra-chave encontrada.</p>";
    if(grafico) grafico.destroy();
    return;
  }
  const resumo = gerarResumo(texto,palavrasChave,3);
  resultado.innerHTML=`
  <div id="resumo"><h2>Resumo:</h2><p>${resumo}</p></div>
  <div id="palavras-chaves"><h2>Palavras-chave:</h2>${palavrasChave.map((p,i)=>`<p><strong>${i+1}.</strong> ${p.palavra} (${p.frequencia}x)</p>`).join('')}</div>
  `;
  atualizarGrafico(palavrasChave);
});

function normalizar(p){
  return p.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();
}

function processaTexto(texto){
  let palavras = texto.split(/\P{L}+/u).map(normalizar).filter(p=>p.length>2);
  palavras = palavras.filter(p=>!PALAVRAS_RUINS.has(p));
  const freq = palavras.reduce((acc,p)=>{acc[p]=(acc[p]||0)+1;return acc;},{});
  return Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,10)
         .map(([palavra,freq])=>({palavra,frequencia:freq}));
}

function gerarResumo(texto,palavrasChave,maxFrases=3){
  const frases = texto.match(/[^.!?]+[.!?]?/g)||[];
  const pontuacao = frases.map(f=>{
    let score=0;
    const words = f.toLowerCase().split(/\P{L}+/u);
    for(let pk of palavrasChave.map(p=>p.palavra)) if(words.includes(pk)) score++;
    return {frase:f.trim(), score};
  });
  pontuacao.sort((a,b)=>b.score-a.score);
  return pontuacao.slice(0,maxFrases).map(f=>f.frase).join(' ');
}

function atualizarGrafico(palavras){
  const labels = palavras.map(p=>p.palavra);
  const valores = palavras.map(p=>p.frequencia);
  if(grafico) grafico.destroy();
  grafico = new Chart(ctx,{
    type:'bar',
    data:{labels, datasets:[{label:'Frequência',data:valores, backgroundColor:'#1E88E5', borderRadius:6}]},
    options:{responsive:true, plugins:{legend:{display:false}}, scales:{x:{ticks:{color:"#fff"}},y:{ticks:{color:"#fff", stepSize:1}}}}
  });
}
</script>
</body>
</html>
