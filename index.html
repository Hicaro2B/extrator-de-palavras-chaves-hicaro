<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extrator de Palavras-Chave</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');

:root {
  --cor-primaria: #0D47A1;
  --cor-secundaria: #1E88E5;
  --cor-destaque: #64B5F6;
  --cor-card: rgba(15,15,26,0.85);
}

body {
  margin:0; padding:0;
  font-family:'Montserrat',sans-serif;
  color:#fff;
  overflow:hidden;
  position:relative;
  background: url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=1470&q=80') no-repeat center center/cover;
}

body::before {
  content:''; position:absolute; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.6);
  z-index:0;
}

header {
  position:fixed; top:0; left:0; width:100%;
  background: var(--cor-card);
  padding:1rem 2rem;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:1rem;
  color: var(--cor-destaque);
  font-weight:600;
  z-index:2;
  box-shadow:0 4px 12px rgba(0,0,0,0.6);
}

#particulas {
  position:absolute; top:0; left:0; width:100%; height:100%;
  z-index:0;
}

.container {
  position:relative; z-index:1;
  max-width:65rem;
  margin:9rem auto 2rem auto;
  display:flex;
  flex-direction:column;
  gap:1.5rem;
}

.card {
  background: var(--cor-card);
  padding:2rem;
  border-radius:1rem;
  box-shadow:0 10px 25px rgba(0,0,0,0.6);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:1rem;
}

.card h2 {
  color: var(--cor-destaque);
  margin-bottom:0.5rem;
}

textarea {
  width: 100%;
  height: 8rem;
  border-radius: 0.75rem;
  padding: 1rem;
  border: 2px solid rgba(255,255,255,0.2);
  outline: none;
  background: rgba(40,40,60,0.85);
  color: #fff;
  resize: none;
  box-sizing: border-box;
  transition: border 0.3s, box-shadow 0.3s;
}

textarea:focus {
  border-color: var(--cor-secundaria);
  box-shadow: 0 0 10px rgba(30,136,229,0.6);
}

button {
  width: 100%;
  max-width: 15rem;
  padding:0.8rem 1rem;
  border:none;
  border-radius:0.6rem;
  background: var(--cor-secundaria);
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition: all 0.3s, box-shadow 0.3s;
}

button:hover {
  background: var(--cor-primaria);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(30,136,229,0.7);
}

#palavras {
  width:100%;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:0.5rem;
}

.chip {
  display:inline-block;
  padding:0.4rem 0.8rem;
  border-radius:0.6rem;
  background: var(--cor-secundaria);
  cursor:pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.chip:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow:0 4px 12px rgba(30,136,229,0.7);
}

#resumo { line-height:1.5rem; margin-top:0.5rem; text-align:center; }

.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:10; }
.modal-content { background: var(--cor-card); padding:2rem; border-radius:1rem; max-width:25rem; text-align:center; box-shadow:0 8px 25px rgba(0,0,0,0.8); }
.modal-content h3 { margin-bottom:1rem; color: var(--cor-destaque); }
.close-btn { position:absolute; top:0.5rem; right:1rem; cursor:pointer; font-weight:bold; font-size:1.2rem; color:#fff; }
</style>
</head>
<body>

<header>
  üíª Desenvolvido por <strong>&nbsp;Hicaro Valdeir Fontes Munhoz ‚Äì 2¬∫ Ano B</strong>
</header>

<canvas id="particulas"></canvas>

<div class="container">

  <div class="card">
    <h2>‚úçÔ∏è Inserir Texto</h2>
    <textarea id="entrada"></textarea>
    <button id="btn">Extrair</button>
  </div>

  <div class="card">
    <h2>üß† Resumo</h2>
    <p id="resumo">O resumo aparecer√° aqui...</p>
  </div>

  <div class="card">
    <h2>üîë Palavras-chave</h2>
    <div id="palavras"></div>
  </div>

</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <span class="close-btn" id="close">&times;</span>
    <h3 id="palavra-modal">Palavra</h3>
    <p id="significado-modal">Significado...</p>
  </div>
</div>

<script>
/* Part√≠culas animadas */
const canvasP = document.getElementById('particulas');
const ctxP = canvasP.getContext('2d');
canvasP.width = window.innerWidth;
canvasP.height = window.innerHeight;
const particulas = [];
for(let i=0;i<120;i++){
  particulas.push({x:Math.random()*canvasP.width,y:Math.random()*canvasP.height,r:Math.random()*2+1,dx:(Math.random()-0.5)*0.5,dy:(Math.random()-0.5)*0.5});
}
function animar(){
  ctxP.clearRect(0,0,canvasP.width,canvasP.height);
  for(let p of particulas){
    ctxP.beginPath();
    ctxP.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctxP.fillStyle='rgba(100,181,246,0.7)';
    ctxP.fill();
    p.x+=p.dx; p.y+=p.dy;
    if(p.x>canvasP.width)p.x=0;
    if(p.x<0)p.x=canvasP.width;
    if(p.y>canvasP.height)p.y=0;
    if(p.y<0)p.y=canvasP.height;
  }
  requestAnimationFrame(animar);
}
animar();
window.addEventListener('resize',()=>{canvasP.width=window.innerWidth; canvasP.height=window.innerHeight;});

/* Dicion√°rio local */
const DICIONARIO = {
  "clima":"Conjunto de condi√ß√µes atmosf√©ricas m√©dias de uma regi√£o.",
  "mercado":"Espa√ßo onde ocorre compra e venda de bens ou servi√ßos.",
  "tecnologia":"Aplica√ß√£o de conhecimentos cient√≠ficos para fins pr√°ticos.",
  "educacao":"Processo de ensino e aprendizagem.",
  "programacao":"A√ß√£o de escrever c√≥digos para criar softwares.",
  "internet":"Rede mundial de computadores interligados.",
  "software":"Conjunto de instru√ß√µes que permitem executar tarefas em computadores."
};
const STOPWORDS = new Set(["que","para","com","n√£o","uma","por","mais","dos","como","mas","foi","ele","das","tem","seu","sua","ser","quando","muito","est√°","tamb√©m"]);

const btn = document.getElementById('btn');
const entrada = document.getElementById('entrada');
const resumoEl = document.getElementById('resumo');
const palavrasEl = document.getElementById('palavras');
const modal = document.getElementById('modal');
const closeModal = document.getElementById('close');
const palavraModal = document.getElementById('palavra-modal');
const significadoModal = document.getElementById('significado-modal');

closeModal.onclick = ()=> modal.style.display='none';
window.onclick = e=>{ if(e.target==modal) modal.style.display='none'; }

function normalizar(p){ return p.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(); }

function processaTexto(texto){
  let palavras = texto.split(/\P{L}+/u).map(normalizar).filter(p=>p.length>2);
  palavras = palavras.filter(p=>!STOPWORDS.has(p));
  const freq = palavras.reduce((acc,p)=>{ acc[p]=(acc[p]||0)+1; return acc; },{});
  return Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,10)
         .map(([palavra,freq])=>({palavra,frequencia:freq}));
}

function gerarResumo(texto, palavrasChave){
  const frases = texto.match(/[^.!?]+[.!?]?/g)||[];
  const pontuacao = frases.map(f=>{
    let score=0;
    const words = f.toLowerCase().split(/\P{L}+/u);
    for(let pk of palavrasChave.map(p=>p.palavra)) if(words.includes(pk)) score++;
    return {frase:f.trim(), score};
  });
  pontuacao.sort((a,b)=>b.score-b.score);
  const max = Math.min(3,pontuacao.length);
  return pontuacao.slice(0,max).map(f=>f.frase).join(' ');
}

function criarChips(palavras){
  palavrasEl.innerHTML='';
  palavras.forEach(p=>{
    const chip = document.createElement('span');
    chip.className='chip';
    chip.textContent=`${p.palavra} (${p.frequencia}x)`;
    chip.onclick=()=>{palavraModal.textContent=p.palavra; significadoModal.textContent=DICIONARIO[p.palavra]||"Defini√ß√£o n√£o encontrada."; modal.style.display='flex';};
    palavrasEl.appendChild(chip);
  });
}

btn.onclick=()=>{
  const texto = entrada.value.trim();
  if(!texto){ resumoEl.textContent="Digite algum texto."; palavrasEl.innerHTML=""; return; }
  const palavrasChave=processaTexto(texto);
  resumoEl.textContent=gerarResumo(texto,palavrasChave);
  criarChips(palavrasChave);
};
</script>

</body>
</html>
